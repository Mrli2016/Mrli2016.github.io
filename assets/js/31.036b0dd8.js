(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{561:function(s,a,e){"use strict";e.r(a);var n=e(6),t=Object(n.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"查看视频信息"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看视频信息"}},[s._v("#")]),s._v(" 查看视频信息")]),s._v(" "),e("p",[s._v("如果想只看视频信息的话可以用"),e("code",[s._v("mediainfo")]),s._v("查看，")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("$ mediainfo video.h265\n\nGeneral\nComplete name                            : video.h265\nFormat                                   : HEVC\nFormat/Info                              : High Efficiency Video Coding\nFile size                                : 1.22 MiB\n\nVideo\nFormat                                   : HEVC\nFormat/Info                              : High Efficiency Video Coding\nFormat profile                           : Main@L5@Main\nWidth                                    : 3 840 pixels\nHeight                                   : 2 160 pixels\nDisplay aspect ratio                     : 16:9\nFrame rate                               : 20.000 FPS\nStandard                                 : Component\nColor space                              : YUV\nChroma subsampling                       : 4:2:0\nBit depth                                : 8 bits\nColor range                              : Limited\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br")])]),e("p",[s._v("如果需要看每一帧的图像数据，可以用"),e("code",[s._v("ffprobe")]),s._v(",例如以下命令可以将每一帧的信息输出到video.json里面去：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('ffprobe -v quiet -show_frames video.h265 -print_format json > video.json\n\n# 查看某种帧类型的数量\nffprobe -v quiet -show_frames -select_streams v video.h265 | grep "pict_type=B" | wc -l\n0\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h2",{attrs:{id:"编码h264"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#编码h264"}},[s._v("#")]),s._v(" 编码h264")]),s._v(" "),e("p",[s._v("由于FFmpeg设置x264参数时增加的参数比价多，使用ffmpeg开放了x264opts，可以通过这个参数设置x264内部私有参数。下面举个例子，控制"),e("code",[s._v("I帧")]),s._v(" "),e("code",[s._v("P帧")]),s._v("，"),e("code",[s._v("B帧")]),s._v("的出现频率，如果不希望出现B帧，则客户只需要将x264参数bframes设置为0即可：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('ffmpeg -i camera_front_rear.avi -vcodec libx264 -pix_fmt yuv420p -x264opts "bframes=0:keyint=1" -x264-params "bframes=0:keyint=1"  video.h264\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"编码h265"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#编码h265"}},[s._v("#")]),s._v(" 编码h265")]),s._v(" "),e("p",[s._v("编码纯I帧的h265视频文件：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('ffmpeg -i camera_front_rear.avi -vcodec libx265 -pix_fmt yuv420p -x265-params "bframes=0:keyint=1"  test.h265\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"查看硬件编码器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看硬件编码器"}},[s._v("#")]),s._v(" 查看硬件编码器")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("ffmpeg -hwaccels\n\n# 查看h264的编码解码器的支持\n$ ffmpeg -hide_banner -codecs|grep h264\n DEV.LS h264                 H.264 / AVC / MPEG-4 AVC / MPEG-4 part 10 (decoders: h264 h264_qsv h264_cuvid ) (encoders: libx264 libx264rgb h264_amf h264_nvenc h264_qsv nvenc nvenc_h264 )\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h2",{attrs:{id:"h264-nvenc-avoptions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#h264-nvenc-avoptions"}},[s._v("#")]),s._v(" h264_nvenc AVOptions")]),s._v(" "),e("p",[s._v("查看指令ffmpeg -h encoder=h264_nvenc")]),s._v(" "),e("h3",{attrs:{id:"gop参数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#gop参数"}},[s._v("#")]),s._v(" gop参数")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("ffmpeg -hwaccel cuvid -i camera_front_rear.avi -vcodec h264_nvenc -pix_fmt yuv420p -g 2 video.h264\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])])}),[],!1,null,null,null);a.default=t.exports}}]);