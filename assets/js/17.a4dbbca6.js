(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{523:function(t,e,i){t.exports=i.p+"assets/img/ipv4_header.53c792d5.png"},524:function(t,e,i){t.exports=i.p+"assets/img/ipv4.b72eff2c.png"},553:function(t,e,i){"use strict";i.r(e);var v=i(6),_=Object(v.a)({},(function(){var t=this,e=t.$createElement,v=t._self._c||e;return v("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[v("h2",{attrs:{id:"ipv4-报文头格式及各字段功能"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#ipv4-报文头格式及各字段功能"}},[t._v("#")]),t._v(" IPv4 报文头格式及各字段功能")]),t._v(" "),v("p",[v("img",{attrs:{src:i(523),alt:""}})]),t._v(" "),v("h3",{attrs:{id:"各字段意义"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#各字段意义"}},[t._v("#")]),t._v(" 各字段意义：")]),t._v(" "),v("ol",[v("li",[t._v("版本号（Version）：长度 4 bit 。标识目前采用的 IP 协议的版本号。一般的值为 0100（IPv4），0110（IPv6）。")])]),t._v(" "),v("table",[v("thead",[v("tr",[v("th",{staticStyle:{"text-align":"center"}},[t._v("版本号")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("意义")]),t._v(" "),v("th",{staticStyle:{"text-align":"center"}},[t._v("RFC文档")])])]),t._v(" "),v("tbody",[v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("0")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("保留")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}})]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("1~3")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("未分配")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}})]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("4")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("Internet 协议版本 4（IPv4）")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("RFC791")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("5")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("ST 数据报（Datagram）")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("RFC1190")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("6")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("简单 Internet 协议（SIP）")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}})]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("6")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("Internet 协议版本 6（IPv6）")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("RFC1883")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("7")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("TP/IX")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("RFC1475")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("8")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("P Internet 协议（PIP）")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("RFC1621")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("9")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("使用更大地址的 TCP 和 UDP（TUBA）")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("RFC1347")])]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("10~14")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("未分配")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}})]),t._v(" "),v("tr",[v("td",{staticStyle:{"text-align":"center"}},[t._v("15")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}},[t._v("保留")]),t._v(" "),v("td",{staticStyle:{"text-align":"center"}})])])]),t._v(" "),v("ol",{attrs:{start:"2"}},[v("li",[v("p",[t._v("IP 报头长度（Header Length）：长度 4 bit 。这个字段的作用是为了描述 IP 报头的长度，因为在 IP 报头中有变长的可选部分(Options)。该部分占 4 个 bit，长度单位为 4 个字节，即本区域值 = IP 头部长度（单位为字节）/ 长度单位（4 个字节）。因此，一个 IP 报头的长度最长为 “ 1111 ”，即 15 x 4 个字节 = 60 个字节。IP 报头最小长度为 20 字节。")])]),t._v(" "),v("li",[v("p",[t._v("服务类型（Type of Service）：长度 8 bit 。8 位按位被如下定义：PPP DTRC0（更多详细信息可以参见 RFC1340 和 RFC1349）")])])]),t._v(" "),v("ul",[v("li",[v("p",[t._v("PPP：前 3 位，定义包的优先级，取值越大数据越重要")]),t._v(" "),v("ul",[v("li",[t._v("000 普通（Routine）")]),t._v(" "),v("li",[t._v("001 优先的（Priority）")]),t._v(" "),v("li",[t._v("010 立即的发送（Immediate）")]),t._v(" "),v("li",[t._v("011 闪电式的（Flash）")]),t._v(" "),v("li",[t._v("100 比闪电还闪电式的（Flash Override）")]),t._v(" "),v("li",[t._v("101 CRI / TIC / ECP（找不到这个词的翻译）")]),t._v(" "),v("li",[t._v("110 网间控制（Internetwork Control）")]),t._v(" "),v("li",[t._v("111 网络控制（Network Control）")])])]),t._v(" "),v("li",[v("p",[t._v("DTRCO：后 5 位")]),t._v(" "),v("ul",[v("li",[t._v("D 时延：0：普通，1：延迟尽量小")]),t._v(" "),v("li",[t._v("T 吞吐量：0：普通，1：流量尽量大")]),t._v(" "),v("li",[t._v("R 可靠性：0：普通，1：可靠性尽量大")]),t._v(" "),v("li",[t._v("M 传输成本：0：普通，1：成本尽量小")]),t._v(" "),v("li",[t._v("0 最后一位被保留，恒定为 0")])])])]),t._v(" "),v("ol",{attrs:{start:"4"}},[v("li",[v("p",[t._v("IP 包总长度（Total Length）：长度 16 bit 。以字节为单位计算的 IP 包的长度（包括头部和数据），所以 IP 包最大长度 65 535 字节。所以，数据包有效载荷的大小 = IP 包总长度（Total Length）- IP 报头长度（Header Length）。")])]),t._v(" "),v("li",[v("p",[t._v("标识符（Identifier）：长度 16 bit 。该字段和 Flags 和 Fragment Offest 字段联合使用，对较大的上层数据包进行分段（fragment）操作。路由器将一个包拆分后，所有拆分开的小包被标记相同的值，以便目的端设备能够区分哪个包属于被拆分开的包的一部分。")])]),t._v(" "),v("li",[v("p",[t._v("标记（Flags）：长度 3 bit 。该字段第一位不使用。第二位是 DF（Don’t Fragment）位，DF 位设为 1 时表明路由器不能对该上层数据包分段。如果一个上层数据包无法在不分段的情况下进行转发，则路由器会丢弃该上层数据包并返回一个错误信息。第三位是 MF（More Fragments）位，当路由器对一个上层数据包分段，则路由器会在除了最后一个分段的 IP 包的报头中将 MF 位设为 1 。")])])]),t._v(" "),v("p",[v("img",{attrs:{src:i(524),alt:""}})]),t._v(" "),v("ol",{attrs:{start:"7"}},[v("li",[t._v("片偏移（Fragment Offset）：长度 13 bit，以 8 个八位组为单位。表示该 IP 包在该组分片包中位置，接收端靠此来组装还原 IP 包。")])]),t._v(" "),v("p",[t._v("作者：Sky\n链接：https://zhuanlan.zhihu.com/p/387551624\n来源：知乎\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。")]),t._v(" "),v("ol",{attrs:{start:"8"}},[v("li",[v("p",[t._v("生存时间（TTL）：长度 8 bit，设计之初是以秒（s）为单位的，但实际以跳数为单位，建议的缺省值为 64 。当 IP 包进行传送时，先会对该字段赋予某个特定的值。当 IP 包经过每一个沿途的路由器的时候，每个沿途的路由器会将 IP 包的 TTL 值减少 1 。如果 TTL 减少为 0，则该 IP 包会被丢弃。这个字段可以防止由于路由环路而导致 IP 包在网络中不停被转发。")])]),t._v(" "),v("li",[v("p",[t._v("协议（Protocol）：长度 8 bit 。标识了上层所使用的协议。以下是比较常用的协议号：1 ICMP；2 IGMP；6 TCP；17 UDP；88 IGRP；89 OSPF 。（更多协议号请点击这里：IP协议号汇总）")])]),t._v(" "),v("li",[v("p",[t._v("头部校验（Header Checksum）：长度 16 bit 。用来做 IP 头部的正确性检测，但不包含数据部分。 因为每个路由器要改变 TTL 的值，所以路由器会为每个通过的数据包重新计算这个值（RFC1141 讨论了一些简化计算的策略）。")])]),t._v(" "),v("li",[v("p",[t._v("起源和目标地址（Source and Destination Addresses）：这两个地址都是 32 bit 。标识了这个 IP 包的起源和目标地址。要注意除非使用 NAT，否则整个传输的过程中，这两个地址不会改变。")])]),t._v(" "),v("li",[v("p",[t._v("可选项（Options）：这是一个可变长的字段。该字段属于可选项，主要用于测试，由起源设备根据需要改写。可选项目包含以下内容：")]),t._v(" "),v("ul",[v("li",[t._v("松散源路由（Loose source routing）：给出一连串路由器接口的 IP 地址。IP 包必须沿着这些 IP 地址传送，但是允许在相继的两个 IP 地址之间跳过多个路由器。")]),t._v(" "),v("li",[t._v("严格源路由（Strict source routing）：给出一连串路由器接口的 IP 地址。IP 包必须沿着这些 IP 地址传送，如果下一跳不在 IP 地址表中则表示发生错误。")]),t._v(" "),v("li",[t._v("路由记录（Record route）：当 IP 包离开每个路由器的时候记录路由器的出站接口的 IP 地址。")]),t._v(" "),v("li",[t._v("时间戳（Timestamps）：当 IP 包离开每个路由器的时候记录时间。")]),t._v(" "),v("li",[t._v("填充（Padding）：因为 IP 报头长度（Header Length）部分的单位为 32 bit，所以 IP 报头的长度必须为 32 bit 的整数倍。因此，在可选项后面，IP 协议会填充若干个 0，以达到 32 bit 的整数倍。")])])])])])}),[],!1,null,null,null);e.default=_.exports}}]);